<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
</head>
<!-----------BODY--------------------->
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<!-------------DISCUSSION CARD------------>
 <div th:each="discussion : ${discussions}"  class="card">
    <div class="card-body">
        <h2 th:text="${discussion.user.username}"></h2>
        <p th:text="${discussion.createdAt}"></p>
        <h3 th:text="${discussion.title}"></h3>
        <p th:text="${discussion.content}"></p>
        <button type="button" id="replyBtn">Reply</button>
<!----------------COMMENT FORM--------------->
        <form th:action="@{/comments/create}" th:object="${comment}"  th:method="POST"  style="display: none" class="commentForm">
        <label for="title"></label>
        <input id="title" type="text" th:field="*{title}">
        <label for="comment"></label>
        <textarea  th:field="*{content}" id="comment" name="comment" class="form-control"></textarea>
        <input id="discussion_id" type="hidden" th:field="*{discussion.id}">
        <input id="dateAndTime" type="hidden" th:field="*{createdAt}">
        <button>Submit</button>
        </form>

<!------------------------DELETE--------------->

        <form th:action="@{/discussions/{id}/delete (id=${discussion.id})}" th:method="post">
        <button th:if="${discussion.user.id == loggedInUser}" type="submit">Delete Post</button>
        </form>
<!------------->
    <br>
<!---------------DISPLAY OF COMMENTS-------------->
        <h4>Comments</h4>
    <div>
        <ul th:each=" comment : ${discussion.comments}" class="comments" style="list-style:none">
        <li><h4 th:text="${comment.user.username}"></h4></li>
        <li><p th:text="${comment.createdAt}"></p></li>
        <li><h3 th:text="${comment.title}"></h3></li>
        <li><p th:text="${comment.content}"></p></li>
        </ul>
    </div>
  </div>
</div>
<!---------------SCRIPT TAG------------------>
<script>
    let replyBtn = document.getElementById("replyBtn")
    replyBtn.addEventListener("click", function (){
        let commentForm = document.getElementsByClassName("commentForm")
         commentForm.style.display("block")
    })
</script>
</body>
<!-----------BODY--------------------->

</html>